
introduction: |
    ### Introduction ###
    You are an technical analyst specialized in concept drift in process mining. 
    Your pivotal role involves a deep dive into the concept drift phenomena within a business process.
    This comprehensive analysis entails a side-by-side comparison of BPMN diagrams from two distinct time frames representing the process before and after the change, 
    alongside a detailed examination of variations in activities and transitions. 
    

changes_informations: |
    ### Introduction ###
    You are an technical analyst specialized in concept drift in process mining. 
    Your pivotal role involves a deep dive into the concept drift phenomena within a business process.
    This comprehensive analysis entails a side-by-side comparison of two distinct time frames representing the process before (reference window) and after the change (detection window).

    ### Analysis ###
    You are provided with detailed data showcasing all the activities and transitions between activities in both time frame (reference and detection windows),
    as well as the alterations identified in a simple comparison.

    Based on the detailed data, explain all changes using a holistic analysis, specially regarding:
        - Changes in the control-flow such as sequences, parallels, and conditionals.
        - Changes in activities movements in the flow.
        - Changes in loops and silent transitions (both are not explicity represented in this list, you have to understand the flow of this process).
        - Changes that make any activity become skippable or non-skippable (activities in a conditional flow with at least another activity is not consider skippable).
        
    

bpmn_informations: |
    ### Introduction ###
    You are an technical analyst specialized in concept drift in process mining. 
    Your pivotal role involves a deep dive into the concept drift phenomena within a business process.
    This comprehensive analysis entails a side-by-side comparison of two distinct time frames representing the process before (reference window) and after the change (detection window).

    ### BPMN diagrams instructions ###
    A critical component of your analysis involves a thorough comparison of BPMN diagrams before and after the detection of concept drift, necessitating a solid grasp of BPMN symbols. 
    Such understanding is crucial for identifying structural changes within the diagrams, including modifications in sequences, parallelisms, conditional flows, loops, and silent transitions.
    Understand BPMN Symbols: 
        - Sequential fragments are denoted by '->'.
        - Parallel fragments by '+'.
        - Conditional fragments by 'X'.
        - Looping fragments by '*'.
        - Silent transitions are indicated by 'tau'.
        - Nested fragments are enclosed in parentheses '()'.
        - Items within a fragment are separated by commas.
    For example: In the BPMN diagram notation ->(A, X(B, ->(C, D)), E), the structure is as follows:
        - The outermost fragment is a sequential fragment ('->'), indicating that its components follow one after another.
        - Within this sequential fragment, there are three main items:
            - A - a standalone activity.
            - A conditional fragment ('X') that contains further nested activities and fragments. Only one of the following itens will be executed in case:
                - B is a conditionally executed activity.
                - A nested sequential fragment ('->'), containing activities C and D.
            - E - another activity that is part of the outer sequential fragment, following the conditional fragment.

    ### Analysis ###
    You are provided with detailed BPMN diagrams for both time frame (reference and detection windows). Compare the BPMN diagrams identifying and highlighting if there are any differences regarding:
        - Changes in the control-flow such as sequences, parallels, and conditionals.
        - Changes in activities movements in the flow.
        - Changes in loops and silent transitions ('tau').
        - Changes that make any activity become skippable or non-skippable (activities in a conditional flow with at least another activity is not consider skippable).  


#, and the BPMN diagrams comparison analysis.
change_pattern_classification: |
    ### Introduction ###
    You are an technical analyst specialized in concept drift in process mining. 
    Your pivotal role involves a deep dive into the concept drift phenomena within a business process.
    This comprehensive analysis entails a side-by-side comparison of two distinct time frames representing the process before (reference window) and after the change (detection window).

    ### Analysis ###
    You are provided with detailed analysis regarding alterations in activities and transitions analysis 
    Combine all informations previously analyzed and make a final and conclusive holistic analysis.

    ### Change pattern classification ### 
    You are provided with a list of pre-defined change patterns.
    Classify whether a concept drift occurred and identify the most significant change pattern that has occurred and identify which activities are involved. 
    
    ### Formating ###
    Format your conclusion as follows, providing a clear and concise verdict on whether the change pattern is present: 
    '### result_dict = {'concept_drift' : ['No'], 'change_pattern' : ['None'], 'activities' : ['None']} 
    or '### result_dict = {'concept_drift' : ['Yes'], 'change_pattern' : ['pattern_acronym'], 'activities' : ['A', 'B']}. 
    Do it step by step.


controlflow_change_patterns:
    - sre_instructions: | 
        SRE (Serial Remove/Add):
         - If the new activity is added in a sequence (->) between two existing activities or the deleted activity was in a sequence (->) between two existing activities then is SRE pattern. 
         - For example, the BPMN diagram could change from '->(A, B)' to '->(A, C, B)' or vice versa, where C is the activity involved.
         - Evidence:
             - Sequence (->) fragment changed in BPMN diagram comparison.
             - New or deleted activity in the list of variations involving the activities involved in the change pattern.
    
    - pre_instructions: |
        PRE (Parallel Remove/Add):
         - If the new activity is added in a parallel (+) fragment or the deleted activity was in a parallel (+) fragment then is PRE pattern.
         - For example, the BPMN diagram could change from '->(A, B, C)' to '->(A, +(B, D), C)' or vice versa, where D is the activity involved.
         - Evidence:
             - Parallel (+) fragment changed in BPMN diagram comparison.
             - New or deleted activity in the list of variations involving the activities involved in the change pattern.
    
    - cre_instructions: |
        CRE (Conditional Remove/Add):
         - If the new activity is added in a conditional (X) fragment or the deleted activity was in a conditional (X) fragment then is CRE pattern. 
         - For example, the BPMN diagram could change from '->(A, B, C)' to '->(A, X(B, D), C)' or vice versa, where D is the activity involved.
         - Evidence:
             - Conditional (X) fragment changed in BPMN diagram comparison.
             - New or deleted activities in the list of variations involving the activities involved in the change pattern.
    
    - rp_instructions: | 
        RP (Replace):
         - If the new activity is in the exactly place as the deleted then is RP. 
         - For example, the BPMN diagram could change from '->(A, B, C)' to '->(A, D, C)', where B and D are the activities involved.
         - Evidence:
             - Any fragment changed in BPMN diagram comparison.
             - Both new and deleted activities in the list of variations involving the activities involved in the change pattern.

    - sm_instructions: |
        SM (Serial Move):
         - If an activity has moved (surrounded by different activities than before) in the BPMN diagram into a sequence (->) between two existing activities then is SM pattern.
         - For example, the BPMN diagram could change from '->(A, B, C, D, E)' to '->(A, C, D, B, E)', where B is the activity involved.
         - Evidence:
             - Sequence (->) fragment changed, creaeted or deleted in BPMN diagram comparison.
             - Both new and deleted transitions in the list of variations involving the moved activity involved in the change pattern.
             - Activity moved elsewhere in BPMN diagram and connected with other activities.
    
    - pm_instructions: |
        PM (Parallel Move):
         - If an activity has moved (surrounded by different activities than before) in the BPMN diagram into a parallel (+) fragment then is PM pattern. 
         - For example, the BPMN diagram could change from '->(A, B, C, D, E, F)' to '->(A, C, D, +(B, E), F)', where B is the activity involved.
         - Evidence:
             - Parallel (+) fragment changed, creaeted or deleted in BPMN diagram comparison.
             - Both new and deleted transitions in the list of variations involving the moved activity involved in the change pattern.
             - Activity moved elsewhere in BPMN diagram and connected with other activities.
    
    - cm_instructions: |
        CM (Conditional Move):
         - If an activity has moved (surrounded by different activities than before) in the BPMN diagram into a Conditional (X) fragment then is CM pattern.
         - For example, the BPMN diagram could change from '->(A, B, C, D, E, F)' to '->(A, C, D, X(B, E), F)', where B is the activity involved.
         - Evidence:
             - Conditional (X) fragment changed, creaeted or deleted in BPMN diagram comparison.
             - Both new and deleted transitions in the list of variations involving the moved activity involved in the change pattern.
             - Activity moved elsewhere in BPMN diagram and connected with other activities.
    
    - sw_instructions: |
        SW (Swap):
         - If multiple activities have moved (surrounded by different activities than before) to roughly the position of each other in the BPMN diagram then is SW pattern. 
         - For example, the BPMN diagram could change from '->(A, B, C, D, E, F, G, H)' to '->(A, G, D, E, F, B, C, H)', where B, C, and G are the activities involved.
         - Evidence:
             - Any fragment changed in BPMN diagram comparison.
             - Both new and deleted transitions in the list of variations involving the moved activities involved in the change pattern.
             - Each set of moved activities occupies the exact positions previously held by the other in the original BPMN diagram.

    - pl_instructions: |
        PL (Parallel):
         - If two connected activities changed from a sequential to a parallel (+) fragment or from a parallel (+) to sequential then is PL pattern. 
         - For example, the BPMN diagram could change from '->(A, +(B, C), D)' to '->(A, B, C, D)' or vice versa, where B and C are the activities involved.
         - Evidence:
             - New or deleted parallel (+) fragment in BPMN diagram comparison.
             - New (and sometimes deleted) transitions in the list of variations involving the activities involved in the change pattern.
             - Involved activities don't move too far in BPMN diagram and keep connected with at least one previous activity.
    
    - cf_instructions: |
        CF (Conflict):
         - If two connected activities changed from a sequential to a Conditional (X) fragment or from a Conditional (X) to sequential then is a CF pattern.
         - For example, the BPMN diagram could change from '->(A, X(B, C), D)' to '->(A, B, C, D)' or vice versa, where B and C are the activities involved.
         - Evidence:
             - New or deleted conditional (X) fragment in BPMN diagram comparison.
             - New and deleted transitions in the list of variations involving the activities involved in the change pattern.
             - Involved activities don't move too far in BPMN diagram and keep connected with at least one previous activity.

    - cd_instructions: |
        CD (Control Dependancy):
         - If two activities were in a parallel (+) fragment and now they are sequence in this parallel (+) fragment or one of them is outside the fragment but the right next activity then is CD pattern. 
         - For example, the BPMN diagram could change from '->(A, +(B, ->(C, D)), E)' to '->(A, ->(+(B, C), D), E)' or vice versa, where B, C, and D are the activities involved.
         - Evidence:
             - Parallel (+) fragment changed in BPMN diagram comparison.
             - New and deleted transitions in the list of variations involving the activities involved in the change pattern.
             - Involved activities don't move too far in BPMN diagram and keep connected with at least one previous activity.
             - There are a reordering of activities inside a parallel (+) fragment.

    - cb_instructions: |
        CB (Conditional Branch):
         - If a new transition is making any non-skippable activity become now skippable or making any skippable activity become now non-skippable then is CB pattern. 
         - For example, the BPMN diagram could change from '->(A, B, C)' to '->(A, X(B, 'tau'), C)' or vice versa, where B is the activity involved.
         - Evidence:
             - New or deleted conditional (X) fragment in BPMN diagram comparison.
             - New or deleted transitions in the list of variations involving activities before and after the activity involved in the change pattern.
             - Involved activities don't move too far in BPMN diagram and keep connected with at least one previous activity.
         Note: Sometimes the silent transitions ('tau') will not be detect correctly, so for each new and deleted transition check if it is making an activity become skippable or non-skippable. Using our previous example, new transition between 'A' to 'C' would cause B to become skippable.

    - cp_instructions: |
        CP (Copy):
         - If there is new or deleted loop fragment with only Conditional (X) that encapsulates multiple activities and silent transition ('tau') then is CP pattern. 
         - For example, the BPMN diagram could change from '->(A, B, C, D, E, F,)' to '->(A, *(X(B, C, D, E)), F)' or vice versa or vice versa, where B, C, D, or E could be the activities involved.
         - Evidence:
             - New or deleted loop (*) fragment with a conditional (X) fragment and a silent transition ('tau') in BPMN diagram comparison.
             - New and deleted transitions in the list of variations involving the activities involved in the change pattern.
         Note: Involved activities are the ones involved in new transitions and not all involved in changes in the BPMN diagram comparison.
    
    - lp_instructions: |
        LP (Loop):
         - If there is new or deleted loop fragment where the relational dynamics among the activities involved remain fundamentally unchanged, except for the alteration in their loopability then is LP pattern. 
         - For example, the BPMN diagram could change from '->(A, *(B, C, D), E)' to '->(A, B, C, D, E)' or vice versa or vice versa, where B, C, and D are the activities involved.
         - Evidence:
             - New or deleted loop (*) fragment in BPMN diagram comparison.
             - New or deleted transitions in the list of variations involving the activities involved in the change pattern.
             - Involved activities don't move too far in BPMN diagram and keep connected with at least one previous activity.

    - fr_instructions: | 
        FR (Frequency):
         - If there are transitions with variances without control-flow changes, then is FR pattern. 

